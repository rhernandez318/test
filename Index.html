<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema VINES - Gesti√≥n de Inventario</title>
    
    <!-- React y Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ‚ö†Ô∏è IMPORTANTE: Reemplaza estos valores con los de tu proyecto Supabase
        const SUPABASE_URL = 'https://szbjlgjczjybbwwvqydb.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN6YmpsZ2pjemp5YmJ3d3ZxeWRiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2MDcyNzgsImV4cCI6MjA3ODE4MzI3OH0.jl52Pg5k5QAnTQnu_agfGoxxF60JVXhNGfq0MXa0GdU';
      
        
        // Inicializar cliente Supabase
        const supabase = supabaseClient.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        const { useState, useEffect } = React;
        
        // Componente de iconos Lucide
        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => {
                lucide.createIcons();
            }, []);
            return <i data-lucide={name} className={className} style={{width: size, height: size}}></i>;
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [vines, setVines] = useState([]);
            const [locs, setLocs] = useState([]);
            const [vigs, setVigs] = useState([]);
            const [admin, setAdmin] = useState({username:'admin',password:'admin123'});
            const [view, setView] = useState('login');
            const [sel, setSel] = useState(null);
            const [modal, setModal] = useState(false);
            const [mType, setMType] = useState('');
            const [search, setSearch] = useState('');
            const [fLoc, setFLoc] = useState('all');
            const [rLoc, setRLoc] = useState('all');
            const [mLoc, setMLoc] = useState('');
            const [mDate, setMDate] = useState(new Date().toISOString().split('T')[0]);
            const [loginUser, setLoginUser] = useState('');
            const [loginPass, setLoginPass] = useState('');
            const [loginError, setLoginError] = useState('');
            const [editModal, setEditModal] = useState(false);
            const [editType, setEditType] = useState('');
            const [editData, setEditData] = useState(null);
            const [editValue, setEditValue] = useState('');
            const [alertModal, setAlertModal] = useState(false);
            const [alertMessage, setAlertMessage] = useState('');
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadData();
            }, []);

            const loadData = async () => {
                try {
                    setLoading(true);
                    
                    const [vinesRes, locsRes, vigsRes, adminRes] = await Promise.all([
                        supabase.from('vines').select('*').order('id'),
                        supabase.from('locations').select('*').order('id'),
                        supabase.from('vigilantes').select('*').order('id'),
                        supabase.from('admin').select('*').single()
                    ]);
                    
                    if (vinesRes.error) throw vinesRes.error;
                    if (locsRes.error) throw locsRes.error;
                    if (vigsRes.error) throw vigsRes.error;
                    
                    setVines(vinesRes.data || []);
                    setLocs(locsRes.data || []);
                    setVigs(vigsRes.data || []);
                    if (adminRes.data) setAdmin(adminRes.data);
                    
                } catch (error) {
                    console.error('Error loading data:', error);
                    setAlertMessage('Error al cargar datos. Verifica la conexi√≥n con Supabase.');
                    setAlertModal(true);
                } finally {
                    setLoading(false);
                }
            };

            const close = () => { 
                setModal(false); 
                setSel(null); 
                setMLoc(''); 
                setMDate(new Date().toISOString().split('T')[0]); 
            };
            
            const handleLogin = (e) => {
                e.preventDefault();
                setLoginError('');
                
                if (loginUser === admin.username && loginPass === admin.password) {
                    setUser({role:'admin',name:'Administrador'});
                    setView('admin-vines');
                    setLoginUser('');
                    setLoginPass('');
                } else {
                    const vig = vigs.find(v => v.email === loginUser && v.password === loginPass && v.active);
                    if (vig) {
                        setUser({role:'vigilante',name:vig.name});
                        setView('vigilante');
                        setLoginUser('');
                        setLoginPass('');
                    } else {
                        setLoginError('Usuario o contrase√±a incorrectos');
                    }
                }
            };

            const handleCSV = async (e) => {
                const f = e.target.files[0];
                if (!f) return;
                
                try {
                    const txt = await f.text();
                    const lines = txt.split('\n');
                    const existingVINs = new Set(vines.map(v => v.vin.toLowerCase()));
                    
                    const nv = lines.slice(1)
                        .filter(ln => ln.trim())
                        .map((ln) => {
                            const vals = ln.split(',').map(x => x.trim());
                            return {
                                id: Date.now() + Math.random(),
                                vin: vals[0] || '',
                                marca: vals[1] || '',
                                modelo: vals[2] || '',
                                a√±o: vals[3] || '',
                                color: vals[4] || '',
                                location: null,
                                entry_date: null,
                                exit_date: null,
                                delivered: false
                            };
                        })
                        .filter(v => v.vin && !existingVINs.has(v.vin.toLowerCase()));
                    
                    const duplicates = lines.slice(1).filter(ln => ln.trim()).length - nv.length;
                    
                    if (nv.length > 0) {
                        const { error } = await supabase.from('vines').insert(nv);
                        if (error) throw error;
                        await loadData();
                        setAlertMessage(`${nv.length} VINES importados${duplicates > 0 ? `. ${duplicates} duplicados ignorados` : ''}`);
                    } else {
                        setAlertMessage('No se encontraron VINES nuevos para importar');
                    }
                    setAlertModal(true);
                    
                } catch(err) { 
                    setAlertMessage('Error al importar CSV: ' + err.message);
                    setAlertModal(true);
                }
            };

            const assignLoc = async () => {
                if (!mLoc || !mDate) {
                    setAlertMessage('Por favor completa todos los campos');
                    setAlertModal(true);
                    return;
                }
                
                const { error } = await supabase
                    .from('vines')
                    .update({
                        location: parseInt(mLoc),
                        entry_date: mDate
                    })
                    .eq('id', sel.id);
                    
                if (error) {
                    setAlertMessage('Error al asignar ubicaci√≥n');
                    setAlertModal(true);
                    return;
                }
                
                await loadData();
                close();
            };

            const exitVin = async () => {
                if (!mDate) {
                    setAlertMessage('Por favor selecciona la fecha de salida');
                    setAlertModal(true);
                    return;
                }
                
                const { error } = await supabase
                    .from('vines')
                    .update({ exit_date: mDate })
                    .eq('id', sel.id);
                    
                if (error) {
                    setAlertMessage('Error al registrar salida');
                    setAlertModal(true);
                    return;
                }
                
                await loadData();
                close();
            };

            const editLoc = (vin) => {
                setSel(vin);
                setMLoc(vin.location?.toString() || '');
                setMDate(vin.entry_date || new Date().toISOString().split('T')[0]);
                setMType('edit');
                setModal(true);
            };

            const updateLoc = async () => {
                if (!mLoc) {
                    setAlertMessage('Por favor selecciona una ubicaci√≥n');
                    setAlertModal(true);
                    return;
                }
                
                const { error } = await supabase
                    .from('vines')
                    .update({
                        location: parseInt(mLoc),
                        entry_date: mDate,
                        exit_date: null,
                        delivered: false
                    })
                    .eq('id', sel.id);
                    
                if (error) {
                    setAlertMessage('Error al actualizar ubicaci√≥n');
                    setAlertModal(true);
                    return;
                }
                
                await loadData();
                close();
            };

            const confirmEdit = async () => {
                try {
                    if (editType === 'location' && editValue.trim()) {
                        await supabase.from('locations').update({name: editValue.trim()}).eq('id', editData.id);
                    } else if (editType === 'add-location' && editValue.trim()) {
                        await supabase.from('locations').insert({id: Date.now(), name: editValue.trim()});
                    } else if (editType === 'delete-location') {
                        await supabase.from('locations').delete().eq('id', editData.id);
                    } else if (editType === 'delete-vigilante') {
                        await supabase.from('vigilantes').delete().eq('id', editData.id);
                    } else if (editType === 'add-vigilante' && editValue.trim()) {
                        const parts = editValue.split('|');
                        if (parts[0] && parts[1] && parts[2]) {
                            await supabase.from('vigilantes').insert({
                                id: Date.now(),
                                name: parts[0],
                                email: parts[1],
                                password: parts[2],
                                active: true
                            });
                        }
                    } else if (editType === 'change-password' && editValue.trim()) {
                        await supabase.from('vigilantes').update({password: editValue.trim()}).eq('id', editData.id);
                    } else if (editType === 'change-admin-password' && editValue.trim()) {
                        await supabase.from('admin').update({password: editValue.trim()}).eq('id', 1);
                        setAlertMessage('Contrase√±a de administrador actualizada');
                        setAlertModal(true);
                    } else if (editType === 'mark-delivered') {
                        await supabase.from('vines').update({
                            location: null,
                            exit_date: new Date().toISOString().split('T')[0],
                            delivered: true
                        }).eq('id', editData.id);
                        setAlertMessage('VIN marcado como entregado al cliente');
                        setAlertModal(true);
                    }
                    
                    await loadData();
                    setEditModal(false);
                    setEditValue('');
                    
                } catch (error) {
                    setAlertMessage('Error al guardar cambios: ' + error.message);
                    setAlertModal(true);
                }
            };

            const exportCSV = (locationId = null) => {
                let data = vines;
                let fname = 'reporte_completo.csv';
                
                if (locationId && locationId !== 'all') {
                    const foundLoc = locs.find(loc => loc.id === parseInt(locationId));
                    data = vines.filter(v => v.location === parseInt(locationId));
                    fname = `reporte_${foundLoc?.name.replace(/\s/g, '_')}.csv`;
                }
                
                const h = ['VIN','Marca','Modelo','A√±o','Color','Ubicaci√≥n','Entrada','Salida','Estado'];
                const rows = data.map(v => [
                    v.vin,
                    v.marca,
                    v.modelo,
                    v.a√±o,
                    v.color,
                    v.delivered ? 'Entregado a Cliente' : v.location ? locs.find(loc=>loc.id===v.location)?.name : 'Sin asignar',
                    v.entry_date || '-',
                    v.exit_date || '-',
                    v.delivered ? 'Entregado' : v.exit_date ? 'Completado' : v.location ? 'En ubicaci√≥n' : 'Pendiente'
                ]);
                
                const csv = [h,...rows].map(r => r.join(',')).join('\n');
                const blob = new Blob([csv], {type:'text/csv'});
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = fname;
                a.click();
                window.URL.revokeObjectURL(url);
            };

            const getReport = () => {
                const byLoc = locs.map(loc => {
                    const curr = vines.filter(v => v.location === loc.id && !v.exit_date);
                    const out = vines.filter(v => v.location === loc.id && v.exit_date);
                    const tot = vines.filter(v => v.location === loc.id);
                    return {
                        location: loc.name,
                        locationId: loc.id,
                        current: curr.length,
                        exited: out.length,
                        total: tot.length,
                        vines: tot
                    };
                });
                
                return {
                    byLocation: byLoc,
                    totals: {
                        total: vines.length,
                        assigned: vines.filter(v => v.location && !v.exit_date).length,
                        completed: vines.filter(v => v.exit_date).length,
                        unassigned: vines.filter(v => !v.location).length
                    }
                };
            };

            const filtered = vines.filter(v => {
                const ms = v.vin.toLowerCase().includes(search.toLowerCase()) || 
                          v.marca.toLowerCase().includes(search.toLowerCase()) || 
                          v.modelo.toLowerCase().includes(search.toLowerCase());
                const ml = fLoc === 'all' || v.location === parseInt(fLoc);
                return ms && ml;
            });

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center">
                        <div className="bg-white rounded-2xl shadow-2xl p-8">
                            <Icon name="package" size={64} className="text-blue-600 animate-pulse mx-auto mb-4" />
                            <p className="text-gray-800 font-semibold">Cargando datos...</p>
                        </div>
                    </div>
                );
            }

            if (view === 'login') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center p-4">
                        <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                            <div className="text-center mb-8">
                                <div className="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <Icon name="package" size={40} className="text-blue-600" />
                                </div>
                                <h1 className="text-3xl font-bold text-gray-800">Sistema VINES</h1>
                                <p className="text-gray-600 mt-2">Gesti√≥n de Inventario</p>
                            </div>
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Usuario / Email</label>
                                    <input 
                                        type="text" 
                                        value={loginUser} 
                                        onChange={(e) => setLoginUser(e.target.value)} 
                                        placeholder="admin o email@ejemplo.com" 
                                        className="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-600 outline-none"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Contrase√±a</label>
                                    <input 
                                        type="password" 
                                        value={loginPass} 
                                        onChange={(e) => setLoginPass(e.target.value)} 
                                        placeholder="Contrase√±a" 
                                        className="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-600 outline-none" 
                                        onKeyPress={(e) => e.key === 'Enter' && handleLogin(e)}
                                    />
                                </div>
                                {loginError && (
                                    <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                                        {loginError}
                                    </div>
                                )}
                                <button 
                                    onClick={handleLogin} 
                                    className="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-4 px-6 rounded-xl transition-all shadow-lg"
                                >
                                    Iniciar Sesi√≥n
                                </button>
                                <div className="mt-6 p-4 bg-gray-50 rounded-lg">
                                    <p className="text-xs text-gray-600 mb-2 font-semibold">Credenciales de prueba:</p>
                                    <p className="text-xs text-gray-600">
                                        üë®‚Äçüíº Admin: <span className="font-mono bg-white px-2 py-1 rounded">admin</span> / 
                                        <span className="font-mono bg-white px-2 py-1 rounded ml-1">admin123</span>
                                    </p>
                                    <p className="text-xs text-gray-600 mt-1">
                                        üëÆ Vigilante: <span className="font-mono bg-white px-2 py-1 rounded">juan@ejemplo.com</span> / 
                                        <span className="font-mono bg-white px-2 py-1 rounded ml-1">vigilante123</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            const Header = () => (
                <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 shadow-lg">
                    <div className="flex justify-between items-center">
                        <div>
                            <h1 className="text-2xl font-bold">Sistema VINES</h1>
                            <p className="text-sm opacity-90">{user?.name}</p>
                        </div>
                        <div className="flex gap-2">
                            {user?.role === 'admin' && (
                                <button 
                                    onClick={() => {
                                        setEditType('change-admin-password');
                                        setEditValue('');
                                        setEditModal(true);
                                    }} 
                                    className="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg text-sm"
                                >
                                    Cambiar Contrase√±a
                                </button>
                            )}
                            <button 
                                onClick={() => {setUser(null); setView('login');}} 
                                className="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg"
                            >
                                <Icon name="log-out" size={20} />
                            </button>
                        </div>
                    </div>
                </div>
            );

            if (user?.role === 'admin') {
                const rep = getReport();
                
                return (
                    <div className="min-h-screen bg-gray-50">
                        <Header />
                        
                        {/* Edit Modal */}
                        {editModal && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                                <div className="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-xl font-bold">
                                            {editType === 'location' && 'Editar Ubicaci√≥n'}
                                            {editType === 'add-location' && 'Nueva Ubicaci√≥n'}
                                            {editType === 'delete-location' && 'Confirmar Eliminaci√≥n'}
                                            {editType === 'delete-vigilante' && 'Confirmar Eliminaci√≥n'}
                                            {editType === 'add-vigilante' && 'Nuevo Vigilante'}
                                            {editType === 'change-password' && 'Cambiar Contrase√±a'}
                                            {editType === 'change-admin-password' && 'Cambiar Contrase√±a Admin'}
                                            {editType === 'mark-delivered' && 'Entregar a Cliente'}
                                        </h3>
                                        <button onClick={() => setEditModal(false)} className="p-2 hover:bg-gray-100 rounded-lg">
                                            <Icon name="x" size={20} />
                                        </button>
                                    </div>
                                    
                                    {(editType === 'delete-location' || editType === 'delete-vigilante') ? (
                                        <div>
                                            <p className="text-gray-700 mb-6">
                                                ¬øSeguro que deseas eliminar {editType === 'delete-location' ? 'la ubicaci√≥n' : 'al vigilante'} 
                                                <span className="font-bold"> "{editData?.name}"</span>?
                                            </p>
                                            <div className="flex gap-3">
                                                <button onClick={() => setEditModal(false)} className="flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 rounded-lg font-semibold">
                                                    Cancelar
                                                </button>
                                                <button onClick={confirmEdit} className="flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold">
                                                    Eliminar
                                                </button>
                                            </div>
                                        </div>
                                    ) : editType === 'mark-delivered' ? (
                                        <div>
                                            <p className="text-gray-700 mb-6">
                                                ¬øConfirmar entrega del VIN <span className="font-bold font-mono">{editData?.vin}</span> al cliente?
                                            </p>
                                            <div className="flex gap-3">
                                                <button onClick={() => setEditModal(false)} className="flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 rounded-lg font-semibold">
                                                    Cancelar
                                                </button>
                                                <button onClick={confirmEdit} className="flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold">
                                                    Confirmar Entrega
                                                </button>
                                            </div>
                                        </div>
                                    ) : editType === 'add-vigilante' ? (
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-sm font-semibold mb-2">Nombre</label>
                                                <input 
                                                    type="text" 
                                                    placeholder="Nombre completo" 
                                                    value={editValue.split('|')[0] || ''} 
                                                    onChange={(e) => {
                                                        const p = editValue.split('|');
                                                        p[0] = e.target.value;
                                                        setEditValue(p.join('|'));
                                                    }} 
                                                    className="w-full px-4 py-3 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold mb-2">Email</label>
                                                <input 
                                                    type="email" 
                                                    placeholder="email@ejemplo.com" 
                                                    value={editValue.split('|')[1] || ''} 
                                                    onChange={(e) => {
                                                        const p = editValue.split('|');
                                                        p[1] = e.target.value;
                                                        setEditValue(p.join('|'));
                                                    }} 
                                                    className="w-full px-4 py-3 border rounded-lg"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold mb-2">Contrase√±a</label>
                                                <input 
                                                    type="text" 
                                                    placeholder="Contrase√±a" 
                                                    value={editValue.split('|')[2] || ''} 
                                                    onChange={(e) => {
                                                        const p = editValue.split('|');
                                                        p[2] = e.target.value;
                                                        setEditValue(p.join('|'));
                                                    }} 
                                                    className="w-full px-4 py-3 border rounded-lg"
                                                />
                                            </div>
                                            <button onClick={confirmEdit} className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold">
                                                Crear
                                            </button>
                                        </div>
                                    ) : (
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-sm font-semibold mb-2">
                                                    {(editType === 'location' || editType === 'add-location') ? 'Nombre de la ubicaci√≥n' : 'Nueva contrase√±a'}
                                                </label>
                                                <input 
                                                    type={(editType === 'change-password' || editType === 'change-admin-password') ? 'password' : 'text'} 
                                                    value={editValue} 
                                                    onChange={(e) => setEditValue(e.target.value)} 
                                                    placeholder={(editType === 'change-password' || editType === 'change-admin-password') ? 'Nueva contrase√±a' : 'Nombre'} 
                                                    className="w-full px-4 py-3 border rounded-lg" 
                                                    onKeyPress={(e) => e.key === 'Enter' && confirmEdit()}
                                                />
                                            </div>
                                            <button onClick={confirmEdit} className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold">
                                                Confirmar
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                        
                        {/* Alert Modal */}
                        {alertModal && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                                <div className="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm">
                                    <div className="text-center mb-4">
                                        <div className="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                                            <Icon name="package" size={32} className="text-blue-600" />
                                        </div>
                                        <p className="text-gray-800">{alertMessage}</p>
                                    </div>
                                    <button onClick={() => setAlertModal(false)} className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold">
                                        Aceptar
                                    </button>
                                </div>
                            </div>
                        )}
                        
                        {/* Navigation Tabs */}
                        <div className="bg-white shadow-sm border-b flex overflow-x-auto">
                            <button onClick={() => setView('admin-vines')} className={`px-6 py-4 font-semibold whitespace-nowrap flex items-center ${view === 'admin-vines' ? 'border-b-4 border-blue-600 text-blue-600' : 'text-gray-600'}`}>
                                <Icon name="package" size={18} className="mr-2" />VINES
                            </button>
                            <button onClick={() => setView('admin-reports')} className={`px-6 py-4 font-semibold whitespace-nowrap flex items-center ${view === 'admin-reports' ? 'border-b-4 border-blue-600 text-blue-600' : 'text-gray-600'}`}>
                                <Icon name="bar-chart-3" size={18} className="mr-2" />Reportes
                            </button>
                            <button onClick={() => setView('admin-locations')} className={`px-6 py-4 font-semibold whitespace-nowrap flex items-center ${view === 'admin-locations' ? 'border-b-4 border-blue-600 text-blue-600' : 'text-gray-600'}`}>
                                <Icon name="map-pin" size={18} className="mr-2" />Ubicaciones
                            </button>
                            <button onClick={() => setView('admin-vigilantes')} className={`px-6 py-4 font-semibold whitespace-nowrap flex items-center ${view === 'admin-vigilantes' ? 'border-b-4 border-blue-600 text-blue-600' : 'text-gray-600'}`}>
                                <Icon name="users" size={18} className="mr-2" />Vigilantes
                            </button>
                        </div>
                        
                        <div className="p-4 max-w-7xl mx-auto">
                            {/* VINES View */}
                            {view === 'admin-vines' && (
                                <div>
                                    <div className="bg-white rounded-xl shadow-md p-6 mb-6">
                                        <label className="block mb-2 font-semibold flex items-center">
                                            <Icon name="upload" size={20} className="mr-2" />Importar CSV
                                        </label>
                                        <input 
                                            type="file" 
                                            accept=".csv" 
                                            onChange={handleCSV} 
                                            className="block w-full text-sm file:mr-4 file:py-3 file:px-6 file:rounded-lg file:border-0 file:bg-blue-600 file:text-white file:font-semibold hover:file:bg-blue-700 file:cursor-pointer"
                                        />
                                        <p className="text-xs text-gray-500 mt-2">Formato: VIN,Marca,Modelo,A√±o,Color</p>
                                    </div>
                                    
                                    <div className="bg-white rounded-xl shadow-md p-6">
                                        <div className="flex justify-between mb-4">
                                            <h2 className="text-xl font-bold">Inventario ({vines.length})</h2>
                                            <button onClick={() => exportCSV()} className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                                                <Icon name="download" size={18} className="mr-2" />Exportar
                                            </button>
                                        </div>
                                        
                                        {vines.length === 0 ? (
                                            <div className="text-center py-12 text-gray-500">
                                                <Icon name="package" size={64} className="mx-auto mb-4 opacity-20" />
                                                <p>No hay VINES</p>
                                            </div>
                                        ) : (
                                            <div className="overflow-x-auto">
                                                <table className="w-full">
                                                    <thead className="bg-gray-50">
                                                        <tr>
                                                            <th className="px-4 py-3 text-left text-sm font-semibold">VIN</th>
                                                            <th className="px-4 py-3 text-left text-sm font-semibold">Marca</th>
                                                            <th className="px-4 py-3 text-left text-sm font-semibold">Modelo</th>
                                                            <th className="px-4 py-3 text-left text-sm font-semibold">A√±o</th>
                                                            <th className="px-4 py-3 text-left text-sm font-semibold">Ubicaci√≥n</th>
                                                            <th className="px-4 py-3 text-left text-sm font-semibold">Estado</th>
                                                            <th className="px-4 py-3 text-left text-sm font-semibold">Acciones</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody className="divide-y">
                                                        {vines.map(vin => (
                                                            <tr key={vin.id} className="hover:bg-gray-50">
                                                                <td className="px-4 py-3 text-sm font-mono">{vin.vin}</td>
                                                                <td className="px-4 py-3 text-sm">{vin.marca}</td>
                                                                <td className="px-4 py-3 text-sm">{vin.modelo}</td>
                                                                <td className="px-4 py-3 text-sm">{vin.a√±o}</td>
                                                                <td className="px-4 py-3 text-sm">
                                                                    {vin.delivered ? 'Entregado a Cliente' : vin.location ? locs.find(loc => loc.id === vin.location)?.name : '-'}
                                                                </td>
                                                                <td className="px-4 py-3">
                                                                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                                        vin.delivered ? 'bg-blue-100 text-blue-700' : 
                                                                        vin.exit_date ? 'bg-gray-200 text-gray-700' : 
                                                                        vin.location ? 'bg-green-100 text-green-700' : 
                                                                        'bg-yellow-100 text-yellow-700'
                                                                    }`}>
                                                                        {vin.delivered ? 'Entregado' : vin.exit_date ? 'Sali√≥' : vin.location ? 'En ubicaci√≥n' : 'Pendiente'}
                                                                    </span>
                                                                </td>
                                                                <td className="px-4 py-3">
                                                                    <div className="flex gap-1">
                                                                        {!vin.delivered && (
                                                                            <button onClick={() => editLoc(vin)} className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg" title="Editar">
                                                                                <Icon name="edit-2" size={16} />
                                                                            </button>
                                                                        )}
                                                                        {!vin.delivered && (
                                                                            <button onClick={() => {
                                                                                setEditType('mark-delivered');
                                                                                setEditData(vin);
                                                                                setEditModal(true);
                                                                            }} className="p-2 text-green-600 hover:bg-green-50 rounded-lg" title="Entregar a Cliente">
                                                                                <Icon name="check-circle" size={16} />
                                                                            </button>
                                                                        )}
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        ))}
                                                    </tbody>
                                                </table>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}
                            
                            {/* Reports View */}
                            {view === 'admin-reports' && (
                                <div className="space-y-6">
                                    <div className="grid md:grid-cols-4 gap-4">
                                        <div className="bg-white rounded-xl shadow-md p-6">
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className="text-sm font-semibold text-gray-600">Total</h3>
                                                <Icon name="package" size={24} className="text-blue-600" />
                                            </div>
                                            <p className="text-3xl font-bold">{rep.totals.total}</p>
                                        </div>
                                        <div className="bg-white rounded-xl shadow-md p-6">
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className="text-sm font-semibold text-gray-600">En Ubicaci√≥n</h3>
                                                <Icon name="map-pin" size={24} className="text-green-600" />
                                            </div>
                                            <p className="text-3xl font-bold text-green-600">{rep.totals.assigned}</p>
                                        </div>
                                        <div className="bg-white rounded-xl shadow-md p-6">
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className="text-sm font-semibold text-gray-600">Completados</h3>
                                                <Icon name="file-text" size={24} className="text-gray-600" />
                                            </div>
                                            <p className="text-3xl font-bold text-gray-600">{rep.totals.completed}</p>
                                        </div>
                                        <div className="bg-white rounded-xl shadow-md p-6">
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className="text-sm font-semibold text-gray-600">Sin Asignar</h3>
                                                <Icon name="calendar" size={24} className="text-yellow-600" />
                                            </div>
                                            <p className="text-3xl font-bold text-yellow-600">{rep.totals.unassigned}</p>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-white rounded-xl shadow-md p-6">
                                        <div className="flex justify-between items-center mb-6">
                                            <h2 className="text-xl font-bold">Reportes por Ubicaci√≥n</h2>
                                            <div className="flex gap-2">
                                                <select value={rLoc} onChange={(e) => setRLoc(e.target.value)} className="px-4 py-2 border rounded-lg">
                                                    <option value="all">Todas</option>
                                                    {locs.map(loc => <option key={loc.id} value={loc.id}>{loc.name}</option>)}
                                                </select>
                                                <button onClick={() => exportCSV(rLoc)} className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                                                    <Icon name="download" size={18} className="mr-2" />Exportar
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <div className="space-y-4">
                                            {rep.byLocation.filter(rpt => rLoc === 'all' || rpt.locationId === parseInt(rLoc)).map(rpt => (
                                                <div key={rpt.locationId} className="border rounded-lg p-6">
                                                    <div className="flex justify-between items-start mb-4">
                                                        <div>
                                                            <h3 className="text-lg font-bold">{rpt.location}</h3>
                                                            <p className="text-sm text-gray-600">Total: {rpt.total}</p>
                                                        </div>
                                                        <div className="flex gap-4">
                                                            <div className="text-center">
                                                                <p className="text-2xl font-bold text-green-600">{rpt.current}</p>
                                                                <p className="text-xs text-gray-600">Actuales</p>
                                                            </div>
                                                            <div className="text-center">
                                                                <p className="text-2xl font-bold text-gray-600">{rpt.exited}</p>
                                                                <p className="text-xs text-gray-600">Salieron</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    {rpt.vines.length > 0 && (
                                                        <div className="bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto">
                                                            <table className="w-full text-sm">
                                                                <thead>
                                                                    <tr className="text-left text-gray-600">
                                                                        <th className="pb-2">VIN</th>
                                                                        <th className="pb-2">Marca/Modelo</th>
                                                                        <th className="pb-2">Entrada</th>
                                                                        <th className="pb-2">Salida</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody className="divide-y">
                                                                    {rpt.vines.map(vinItem => (
                                                                        <tr key={vinItem.id}>
                                                                            <td className="py-2 font-mono text-xs">{vinItem.vin}</td>
                                                                            <td className="py-2">{vinItem.marca} {vinItem.modelo}</td>
                                                                            <td className="py-2">{vinItem.entry_date ? new Date(vinItem.entry_date).toLocaleDateString() : '-'}</td>
                                                                            <td className="py-2">{vinItem.exit_date ? new Date(vinItem.exit_date).toLocaleDateString() : '-'}</td>
                                                                        </tr>
                                                                    ))}
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {/* Locations View */}
                            {view === 'admin-locations' && (
                                <div className="bg-white rounded-xl shadow-md p-6">
                                    <div className="flex justify-between items-center mb-6">
                                        <h2 className="text-xl font-bold">Ubicaciones</h2>
                                        <button onClick={() => {
                                            setEditType('add-location');
                                            setEditData(null);
                                            setEditValue('');
                                            setEditModal(true);
                                        }} className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                                            <Icon name="plus" size={20} className="mr-2" />Nueva
                                        </button>
                                    </div>
                                    
                                    <div className="grid gap-4">
                                        {locs.map(loc => {
                                            const cnt = vines.filter(v => v.location === loc.id && !v.exit_date).length;
                                            return (
                                                <div key={loc.id} className="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                                                    <div className="flex items-center">
                                                        <Icon name="map-pin" size={24} className="text-blue-600 mr-3" />
                                                        <div>
                                                            <span className="font-semibold">{loc.name}</span>
                                                            <p className="text-sm text-gray-600">{cnt} VINES</p>
                                                        </div>
                                                    </div>
                                                    <div className="flex gap-2">
                                                        <button onClick={() => {
                                                            setEditType('location');
                                                            setEditData(loc);
                                                            setEditValue(loc.name);
                                                            setEditModal(true);
                                                        }} className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg">
                                                            <Icon name="edit-2" size={18} />
                                                        </button>
                                                        <button onClick={() => {
                                                            setEditType('delete-location');
                                                            setEditData(loc);
                                                            setEditModal(true);
                                                        }} className="p-2 text-red-600 hover:bg-red-50 rounded-lg">
                                                            <Icon name="trash-2" size={18} />
                                                        </button>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            )}
                            
                            {/* Vigilantes View */}
                            {view === 'admin-vigilantes' && (
                                <div className="bg-white rounded-xl shadow-md p-6">
                                    <div className="flex justify-between items-center mb-6">
                                        <h2 className="text-xl font-bold">Vigilantes</h2>
                                        <button onClick={() => {
                                            setEditType('add-vigilante');
                                            setEditValue('');
                                            setEditModal(true);
                                        }} className="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center">
                                            <Icon name="plus" size={20} className="mr-2" />Nuevo
                                        </button>
                                    </div>
                                    
                                    <div className="grid gap-4">
                                        {vigs.map(vig => (
                                            <div key={vig.id} className="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                                                <div>
                                                    <div className="font-semibold">{vig.name}</div>
                                                    <div className="text-sm text-gray-600">{vig.email}</div>
                                                    <div className="text-xs text-gray-500 font-mono mt-1">Contrase√±a: {vig.password}</div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                        vig.active ? 'bg-green-100 text-green-700' : 'bg-gray-200 text-gray-700'
                                                    }`}>
                                                        {vig.active ? 'Activo' : 'Inactivo'}
                                                    </span>
                                                    <button onClick={() => {
                                                        setEditType('change-password');
                                                        setEditData(vig);
                                                        setEditValue('');
                                                        setEditModal(true);
                                                    }} className="px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg text-xs font-semibold">
                                                        Cambiar Pass
                                                    </button>
                                                    <button onClick={async () => {
                                                        await supabase.from('vigilantes').update({active: !vig.active}).eq('id', vig.id);
                                                        await loadData();
                                                    }} className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-semibold">
                                                        {vig.active ? 'Desactivar' : 'Activar'}
                                                    </button>
                                                    <button onClick={() => {
                                                        setEditType('delete-vigilante');
                                                        setEditData(vig);
                                                        setEditModal(true);
                                                    }} className="p-2 text-red-600 hover:bg-red-50 rounded-lg">
                                                        <Icon name="trash-2" size={18} />
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                        
                        {/* Modal for VIN operations */}
                        {modal && sel && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                                <div className="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-xl font-bold">
                                            {mType === 'entry' ? 'Asignar Ubicaci√≥n' : mType === 'exit' ? 'Registrar Salida' : 'Editar Ubicaci√≥n'}
                                        </h3>
                                        <button onClick={close} className="p-2 hover:bg-gray-100 rounded-lg">
                                            <Icon name="x" size={20} />
                                        </button>
                                    </div>
                                    
                                    <div className="bg-gray-50 rounded-lg p-4 mb-4">
                                        <p className="font-mono font-semibold">{sel.vin}</p>
                                        <p className="text-sm text-gray-600">{sel.marca} {sel.modelo}</p>
                                    </div>
                                    
                                    {mType === 'exit' ? (
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-sm font-semibold mb-2">Fecha Salida</label>
                                                <input 
                                                    type="date" 
                                                    value={mDate} 
                                                    onChange={(e) => setMDate(e.target.value)} 
                                                    className="w-full px-4 py-3 border rounded-lg"
                                                />
                                            </div>
                                            <button onClick={exitVin} className="w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-lg font-semibold">
                                                Confirmar
                                            </button>
                                        </div>
                                    ) : (
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-sm font-semibold mb-2">Ubicaci√≥n</label>
                                                <select value={mLoc} onChange={(e) => setMLoc(e.target.value)} className="w-full px-4 py-3 border rounded-lg">
                                                    <option value="">Seleccionar...</option>
                                                    {locs.map(loc => (
                                                        <option key={loc.id} value={loc.id}>{loc.name}</option>
                                                    ))}
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold mb-2">Fecha Entrada</label>
                                                <input 
                                                    type="date" 
                                                    value={mDate} 
                                                    onChange={(e) => setMDate(e.target.value)} 
                                                    className="w-full px-4 py-3 border rounded-lg"
                                                />
                                            </div>
                                            <button onClick={mType === 'edit' ? updateLoc : assignLoc} className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold">
                                                Confirmar
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            // Vigilante View
            return (
                <div className="min-h-screen bg-gray-50">
                    <Header />
                    <div className="p-4 max-w-7xl mx-auto">
                        <div className="bg-white rounded-xl shadow-md p-4 mb-6">
                            <div className="grid md:grid-cols-2 gap-4">
                                <input 
                                    type="text" 
                                    placeholder="Buscar VIN, marca, modelo..." 
                                    value={search} 
                                    onChange={(e) => setSearch(e.target.value)} 
                                    className="px-4 py-3 border rounded-lg"
                                />
                                <select value={fLoc} onChange={(e) => setFLoc(e.target.value)} className="px-4 py-3 border rounded-lg">
                                    <option value="all">Todas las ubicaciones</option>
                                    {locs.map(loc => (
                                        <option key={loc.id} value={loc.id}>{loc.name}</option>
                                    ))}
                                </select>
                            </div>
                        </div>
                        
                        <div className="grid gap-4">
                            {filtered.length === 0 ? (
                                <div className="bg-white rounded-xl shadow-md p-12 text-center text-gray-500">
                                    <Icon name="package" size={64} className="mx-auto mb-4 opacity-20" />
                                    <p>No hay VINES</p>
                                </div>
                            ) : (
                                filtered.map(vin => (
                                    <div key={vin.id} className="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow">
                                        <div className="flex justify-between items-start mb-4">
                                            <div>
                                                <h3 className="text-lg font-bold font-mono">{vin.vin}</h3>
                                                <p className="text-gray-600">{vin.marca} {vin.modelo} - {vin.a√±o}</p>
                                                <p className="text-sm text-gray-500">Color: {vin.color}</p>
                                            </div>
                                            <span className={`px-4 py-2 rounded-full text-sm font-semibold ${
                                                vin.delivered ? 'bg-blue-100 text-blue-700' : 
                                                vin.exit_date ? 'bg-gray-200 text-gray-700' : 
                                                vin.location ? 'bg-green-100 text-green-700' : 
                                                'bg-yellow-100 text-yellow-700'
                                            }`}>
                                                {vin.delivered ? 'Entregado' : vin.exit_date ? 'Completado' : vin.location ? 'En ubicaci√≥n' : 'Sin asignar'}
                                            </span>
                                        </div>
                                        
                                        {vin.location && (
                                            <div className="bg-gray-50 rounded-lg p-4 mb-4 space-y-2">
                                                <div className="flex items-center text-sm">
                                                    <Icon name="map-pin" size={16} className="mr-2 text-purple-600" />
                                                    <span className="font-semibold">{locs.find(loc => loc.id === vin.location)?.name}</span>
                                                </div>
                                                {vin.entry_date && (
                                                    <div className="flex items-center text-sm text-gray-600">
                                                        <Icon name="calendar" size={16} className="mr-2" />
                                                        Entrada: {new Date(vin.entry_date).toLocaleDateString()}
                                                    </div>
                                                )}
                                                {vin.exit_date && (
                                                    <div className="flex items-center text-sm text-gray-600">
                                                        <Icon name="calendar" size={16} className="mr-2" />
                                                        Salida: {new Date(vin.exit_date).toLocaleDateString()}
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                        
                                        <div className="flex gap-2">
                                            {!vin.location && !vin.delivered && (
                                                <button 
                                                    type="button" 
                                                    onClick={() => {
                                                        setSel(vin);
                                                        setMType('entry');
                                                        setModal(true);
                                                        setMLoc('');
                                                        setMDate(new Date().toISOString().split('T')[0]);
                                                    }} 
                                                    className="flex-1 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold"
                                                >
                                                    Asignar Ubicaci√≥n
                                                </button>
                                            )}
                                            {vin.location && !vin.exit_date && !vin.delivered && (
                                                <button 
                                                    type="button" 
                                                    onClick={() => {
                                                        setSel(vin);
                                                        setMType('exit');
                                                        setModal(true);
                                                        setMDate(new Date().toISOString().split('T')[0]);
                                                    }} 
                                                    className="flex-1 bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-semibold"
                                                >
                                                    Registrar Salida
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                    </div>
                    
                    {/* Modal for VIN operations (Vigilante) */}
                    {modal && sel && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md">
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-xl font-bold">
                                        {mType === 'entry' ? 'Asignar Ubicaci√≥n' : mType === 'exit' ? 'Registrar Salida' : 'Corregir Ubicaci√≥n'}
                                    </h3>
                                    <button onClick={close} className="p-2 hover:bg-gray-100 rounded-lg">
                                        <Icon name="x" size={20} />
                                    </button>
                                </div>
                                
                                <div className="bg-gray-50 rounded-lg p-4 mb-4">
                                    <p className="font-mono font-semibold">{sel.vin}</p>
                                    <p className="text-sm text-gray-600">{sel.marca} {sel.modelo}</p>
                                </div>
                                
                                {mType === 'exit' ? (
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Fecha Salida</label>
                                            <input 
                                                type="date" 
                                                value={mDate} 
                                                onChange={(e) => setMDate(e.target.value)} 
                                                className="w-full px-4 py-3 border rounded-lg"
                                            />
                                        </div>
                                        <button onClick={exitVin} className="w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-lg font-semibold">
                                            Confirmar
                                        </button>
                                    </div>
                                ) : (
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Ubicaci√≥n</label>
                                            <select value={mLoc} onChange={(e) => setMLoc(e.target.value)} className="w-full px-4 py-3 border rounded-lg">
                                                <option value="">Seleccionar...</option>
                                                {locs.map(loc => (
                                                    <option key={loc.id} value={loc.id}>{loc.name}</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Fecha Entrada</label>
                                            <input 
                                                type="date" 
                                                value={mDate} 
                                                onChange={(e) => setMDate(e.target.value)} 
                                                className="w-full px-4 py-3 border rounded-lg"
                                            />
                                        </div>
                                        <button onClick={mType === 'edit' ? updateLoc : assignLoc} className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold">
                                            Confirmar
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                    
                    {/* Alert Modal (Vigilante) */}
                    {alertModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm">
                                <div className="text-center mb-4">
                                    <div className="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <Icon name="package" size={32} className="text-blue-600" />
                                    </div>
                                    <p className="text-gray-800">{alertMessage}</p>
                                </div>
                                <button onClick={() => setAlertModal(false)} className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold">
                                    Aceptar
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
